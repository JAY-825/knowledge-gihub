# vue中的data属性

学习vue的朋友们都知道的一句话，就是data属性要写成一个函数形式，不要写成对象形式，这里就来简单梳理一下这句话。



## 实例和组件中data的区别

在实例中(相当于new Vue())，定义data属性时可以是函数，也可以是对象。这两种形式定义都可以。

```js
const app = new Vue({
    ...
    // 对象形式
    data(){
    
	},
    // 函数形式
    data(){
    	return { ... }
	}
})
```

而在组件中(通常泛指.vue文件)，data只能定义为一个函数。如果定义成一个对象，运行将会报错，官方也禁止这样做。

```js
// 正确做法，定义为函数
// 注册组件形式
Vue.component('组件名',{
    template:`<div>组件1</div>`,
    data(){
        return {
            msg: 'hello world'
        }
    }
})
// .vue文件写法
export default {
    data(){
        return {
            msg: 'hello world'
        }
    }
}
```

## 为什么组件中data要定义成函数形式？

> 我们已经知道在组件中data要定义成一个函数形式，而这样做的原因就是函数返回的对象内存地址并不相同

定义一个组件时，最终vue都会通过Vue.extend()构成组件实例

- 使用对象的形式，会造成多个组件之间的data共用一个引用地址，会出现像A组件修改数据，B组件也发生相应改变，从而造成数据污染。

- 使用函数形式则可以避免这种情况，因为函数返回的对象内存地址不相同，不存在引用混乱

`vue`组件可能会有很多个实例，所以采用函数返回一个全新`data`形式，使每个实例对象的数据不会受到其他实例对象数据的污染



## 总结

- 根实例对象`data`可以是对象也可以是函数（根实例是单例），不会产生数据污染情况
- 组件实例对象`data`必须为函数，目的是为了防止多个组件实例对象之间共用一个`data`，产生数据污染。